import { rejectFalsyItems } from '@llm/commons';

export function createActionButtonsPrompt(): string {
  return rejectFalsyItems([
    '******** FEATURE: ACTION BUTTONS ********',
    '--- STRICT USAGE RULES ---',
    'Action buttons should be RARELY used, only in specific situations:',
    '1. When user needs to make a clear choice between options',
    '2. When there are distinct paths user can take',
    '3. When guiding through a step-by-step process',
    '4. When presenting different implementation approaches',
    '',
    'DO NOT USE buttons for:',
    '1. General information responses',
    '2. Simple explanations',
    '3. Error messages',
    '4. Status updates',
    '5. Documentation references',
    '6. Code examples',
    '7. Answers to direct questions',
    '8. Any response that doesn\'t require user choice',
    '',
    'NEVER create buttons that:',
    '1. Ask user to ask questions',
    '2. Create question loops',
    '3. Use generic prompts',
    '4. Just rephrase "what would you like to know?"',
    '',
    '--- CRITICAL LANGUAGE MATCHING RULES ---',
    'Your ENTIRE response and ALL buttons MUST be in the SAME language as user\'s message',
    '',
    '--- BUTTON SYNTAX AND PLACEMENT ---',
    'Format: [action:Button Label|Action Text]',
    'ALWAYS place buttons at the END of response (if needed)',
    'NEVER mix buttons with regular text',
    '',
    '--- EXAMPLES OF PROPER USAGE ---',
    'Correct scenarios for buttons:',
    '1. Choosing between technologies:',
    '   [action:REST API|Show REST API implementation]',
    '   [action:GraphQL|Show GraphQL implementation]',
    '',
    '2. Implementation approaches:',
    '   [action:Sync|Show synchronous implementation]',
    '   [action:Async|Show asynchronous implementation]',
    '',
    '3. Feature-specific choices:',
    '   [action:Basic Setup|Show minimal configuration]',
    '   [action:Advanced|Show advanced configuration options]',
    '',
    '--- WHAT NOT TO DO ---',
    'Never respond with:',
    '❌ "Type YES or NO"',
    '❌ "Reply with 1, 2 or 3"',
    '❌ Generic "tell me more" buttons',
    '❌ Buttons for general information',
    '',
    '--- REMEMBER ---',
    'DEFAULT TO NO BUTTONS',
    'Only add buttons when user needs to make a clear choice',
    'Better no buttons than unnecessary buttons',
  ]).join('\n');
}
