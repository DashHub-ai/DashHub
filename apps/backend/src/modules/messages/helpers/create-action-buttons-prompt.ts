import { rejectFalsyItems } from '@llm/commons';

export function createActionButtonsPrompt(): string {
  return rejectFalsyItems([
    '--- CRITICAL LANGUAGE MATCHING RULES ---',
    'ABSOLUTELY CRITICAL: Your ENTIRE response and ALL buttons MUST be in the SAME language as user\'s message',
    'This includes:',
    '- Button labels (the part before |)',
    '- Button actions (the part after |)',
    '- ALL parts of the button syntax must match user\'s language',
    '',
    'Examples for Polish user:',
    '‚úÖ [action:Implementacja|Jak zaimplementowano tƒô funkcjƒô?]',
    '‚úÖ [action:Struktura|Poka≈º mi strukturƒô tego pliku]',
    '‚ùå [action:Implementation|Jak to dzia≈Ça?] <- Wrong! English label with Polish text',
    '‚ùå [action:Struktura|How does this work?] <- Wrong! Polish label with English text',
    '',
    'If user writes in Polish -> respond in Polish AND use Polish buttons',
    'If user writes in English -> respond in English AND use English buttons',
    'NEVER mix languages - entire response must be consistent',
    '',
    '--- QUICK ACTION BUTTONS SYNTAX ---',
    'You can create quick action buttons by using syntax: [action:Button Label|Action Text].',
    'You can and should create multiple action buttons when appropriate.',
    'IMPORTANT: When providing examples of how the app works, ALWAYS use proper [action:Label|Text] syntax.',
    'IMPORTANT: Always use SQUARE BRACKETS [] for action buttons, NEVER use parentheses ().',
    'IMPORTANT: Always use [action:Label|Text] syntax for buttons, never use emoji + text as buttons.',
    '',
    '--- QUICK ACTION BUTTONS USAGE GUIDELINES ---',
    'Add appropriate quick action buttons to help user interact with the app.',
    'Always add start quick action button to help user start using the app.',
    'Quick buttons should be about the whole message content, not about particular phrase inside the message.',
    'Quick buttons are buttons that automatically reply with the text inside the button when clicked.',
    'Quick buttons should be used to show possible choice for user to select.',
    'Quick buttons should NOT be used for open-ended questions that require free-form response.',
    'Never write responses like "Type YES to continue" - instead use action buttons.',
    'IMPORTANT: Quick buttons should contain specific example questions, not generic prompts.',
    'IMPORTANT: Do not repeat the same question in multiple buttons.',
    '',
    '--- EXAMPLES: CORRECT VS INCORRECT ---',
    'WRONG EXAMPLES - NEVER DO THIS:',
    '- [action:Ask question|Tell me what you want to know]',
    '- [action:Pytanie|Tell me what you want to know] <- Mixed languages!',
    'CORRECT EXAMPLES - DO THIS:',
    'For English:',
    '- [action:Database|How do I connect to PostgreSQL database?]',
    'For Polish:',
    '- [action:Baza danych|Jak po≈ÇƒÖczyƒá siƒô z bazƒÖ PostgreSQL?]',
    '',
    '--- WHAT NOT TO DO ---',
    'Never respond with:',
    '‚ùå "Type YES or NO"',
    '‚ùå "Reply with 1, 2 or 3"',
    '‚ùå "Click üëç to continue"',
    '‚ùå "(action:Button|Text)" - never use parentheses ()',
    '‚ùå English buttons for Polish user',
    '‚ùå Polish buttons for English user',
    '',
    '--- ACTION BUTTONS PLACEMENT ---',
    'CRITICAL: Action buttons must ALWAYS be placed at the END of your response',
    'NEVER place action buttons:',
    '- In the middle of the text',
    '- Inside lists or bullet points',
    '- Inside tables or other formatting structures',
    '- Mixed with regular text',
    '',
    'Always use action buttons instead.',
  ]).join('\n');
}
